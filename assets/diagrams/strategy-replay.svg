<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280 300" role="img" aria-label="Replay strategy pipeline with anchor memory and soft regularization">
  <defs>
    <style>
      .title { font: 600 18px 'IBM Plex Sans', Arial, sans-serif; fill: #1c232d; }
      .role { font: 600 11px 'IBM Plex Sans', Arial, sans-serif; letter-spacing: 0.08em; text-transform: uppercase; fill: #5a6474; }
      .node { font: 600 15px 'IBM Plex Sans', Arial, sans-serif; fill: #1f2833; }
      .sub { font: 500 12px 'IBM Plex Sans', Arial, sans-serif; fill: #394352; }
      .rail { font: 600 11px 'IBM Plex Sans', Arial, sans-serif; fill: #212a36; }
      .railv { font: 500 11px 'IBM Plex Sans', Arial, sans-serif; fill: #3b4656; }
    </style>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 z" fill="#2f3a47"/>
    </marker>
  </defs>

  <rect width="1280" height="300" fill="#ffffff"/>
  <rect x="8" y="8" width="1264" height="284" rx="10" fill="#ffffff" stroke="#d4dbe4"/>

  <text x="28" y="34" class="title">B. Replay updater: stress memory adds a soft pullback to drift</text>

  <text x="66" y="58" class="role">Data</text>
  <text x="316" y="58" class="role">Frozen system</text>
  <text x="566" y="58" class="role">Anchor memory</text>
  <text x="816" y="58" class="role">Update operator</text>
  <text x="1066" y="58" class="role">Decision layer</text>

  <rect x="28" y="74" width="220" height="118" rx="10" fill="#eef3f8" stroke="#5a6f88" stroke-width="1.5"/>
  <text x="138" y="122" text-anchor="middle" class="node">LLM stream</text>
  <text x="138" y="144" text-anchor="middle" class="sub">tokenized market flow</text>

  <line x1="248" y1="133" x2="278" y2="133" stroke="#2f3a47" stroke-width="2.1" marker-end="url(#arrow)"/>

  <rect x="278" y="74" width="220" height="118" rx="10" fill="#f8fafc" stroke="#6a7686" stroke-width="1.5"/>
  <text x="388" y="122" text-anchor="middle" class="node">Backbone fixed</text>
  <text x="388" y="144" text-anchor="middle" class="sub">transformer + optimizer</text>

  <line x1="498" y1="133" x2="528" y2="133" stroke="#2f3a47" stroke-width="2.1" marker-end="url(#arrow)"/>

  <rect x="528" y="74" width="220" height="118" rx="10" fill="#f8f2ea" stroke="#7a644a" stroke-width="1.6"/>
  <text x="638" y="122" text-anchor="middle" class="node">Anchor fixture ON</text>
  <text x="638" y="144" text-anchor="middle" class="sub">stress cards replayed</text>

  <line x1="748" y1="133" x2="778" y2="133" stroke="#2f3a47" stroke-width="2.1" marker-end="url(#arrow)"/>
  <line x1="638" y1="192" x2="868" y2="192" stroke="#7a644a" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="753" y="184" text-anchor="middle" class="sub" fill="#65503a">anchor gradient g_a</text>

  <rect x="778" y="74" width="220" height="118" rx="10" fill="#f3ede7" stroke="#8c5b2f" stroke-width="1.7"/>
  <text x="888" y="116" text-anchor="middle" class="node">Mixed step</text>
  <text x="888" y="136" text-anchor="middle" class="sub">g = g_d + Î² g_a</text>
  <text x="888" y="156" text-anchor="middle" class="sub">soft memory penalty</text>

  <line x1="998" y1="133" x2="1028" y2="133" stroke="#2f3a47" stroke-width="2.1" marker-end="url(#arrow)"/>

  <rect x="1028" y="74" width="220" height="118" rx="10" fill="#eef4ef" stroke="#47644f" stroke-width="1.5"/>
  <text x="1138" y="122" text-anchor="middle" class="node">Portfolio action</text>
  <text x="1138" y="144" text-anchor="middle" class="sub">weights + turnover + risk</text>

  <rect x="28" y="214" width="402" height="62" rx="8" fill="#f8fafc" stroke="#d4dbe4"/>
  <text x="44" y="238" class="rail">Preserves</text>
  <text x="108" y="238" class="railv">anchor stress fixtures through replay pressure</text>
  <text x="44" y="258" class="rail">Allows</text>
  <text x="94" y="258" class="railv">drift adaptation with a soft memory correction</text>

  <rect x="438" y="214" width="402" height="62" rx="8" fill="#f8fafc" stroke="#d4dbe4"/>
  <text x="454" y="238" class="rail">Control</text>
  <text x="506" y="238" class="railv">regularization only; infeasible directions can still pass</text>
  <text x="454" y="258" class="rail">Production read</text>
  <text x="545" y="258" class="railv">improves retention but lacks hard release guard</text>

  <rect x="848" y="214" width="400" height="62" rx="8" fill="#f5f9fd" stroke="#c5d6e8"/>
  <text x="864" y="238" class="rail">5-second takeaway</text>
  <text x="966" y="238" class="railv">memory exists, but control remains soft under conflicting stress</text>
</svg>
